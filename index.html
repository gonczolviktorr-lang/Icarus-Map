<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icarus Map</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<!-- Terminal --
cd .\Icarus_Map\
python -m http.server --bind 127.0.0.1 
-->

<body>
    <div class="controls">
        <button onclick="zoomIn()">Zoom In (+)</button>
        <button onclick="zoomOut()">Zoom Out (-)</button>
        <button onclick="resetZoom()">Reset</button>
    </div>

    <div class="map-container" id="mapContainer">
        <div class="map-wrapper" id="mapWrapper">
            <!-- Base map -->
            <img src="assets/images/Map_Olympus.png" class="map-image">
            
            <!-- Info Box -->
            <img src="assets/images/Map_Olympus  Info Box.png" class="layer" id="Info Box" style="display: block;">

            <!-- Basic Ores -->
            <img src="assets/images/Stone.png" class="layer" id="stone-layer" style="display: block;">
            <img src="assets/images/Oxite.png" class="layer" id="oxite-layer" style="display: block;">
            <img src="assets/images/Sulfur.png" class="layer" id="sulfur-layer" style="display: block;">
            <img src="assets/images/Copper.png" class="layer" id="copper-layer" style="display: block;">
            <img src="assets/images/Iron.png" class="layer" id="iron-layer" style="display: block;">
            <img src="assets/images/Salt.png" class="layer" id="salt-layer" style="display: block;">
            <img src="assets/images/Coal.png" class="layer" id="coal-layer" style="display: block;">

            <!-- Advanced Ores -->
            <img src="assets/images/Silica.png" class="layer" id="silica-layer" style="display: block;">
            <img src="assets/images/Gold.png" class="layer" id="gold-layer" style="display: block;">
            <img src="assets/images/Platinum.png" class="layer" id="platinum-layer" style="display: block;">
            <img src="assets/images/Aluminum.png" class="layer" id="aluminum-layer" style="display: block;">
            <img src="assets/images/Titanium.png" class="layer" id="titanium-layer" style="display: block;">
        </div>
    </div>

    <section class="controls container-fluid">
        <div class="row justify-content-center g-2">
            <div class="col-12 text-center">
                <button class="layer-toggle active" id="info_box" onclick="toggleLayer('Info Box')">Info Box</button>
            </div>

            <div class="col-12 text-center">
                <div class="ores">
                    <span style="margin-left: 20px;">Basic Ores:</span>
                    <button class="layer-toggle active" id="Stone" onclick="toggleLayer('stone-layer')">Stone</button>
                    <button class="layer-toggle active" id="Oxite" onclick="toggleLayer('oxite-layer')">Oxite</button>
                    <button class="layer-toggle active" id="Sulfur" onclick="toggleLayer('sulfur-layer')">Sulfur</button>
                    <button class="layer-toggle active" id="Copper" onclick="toggleLayer('copper-layer')">Copper</button>
                    <button class="layer-toggle active" id="Iron" onclick="toggleLayer('iron-layer')">Iron</button>
                    <button class="layer-toggle active" id="Salt" onclick="toggleLayer('salt-layer')">Salt</button>
                    <button class="layer-toggle active" id="Coal" onclick="toggleLayer('coal-layer')">Coal</button>
                </div>
            </div>

            <div class="col-12 text-center">
                <div class="ores">
                    <span style="margin-left: 20px;">Advanced Ores:</span>
                    <button class="layer-toggle active" id="Silica" onclick="toggleLayer('silica-layer')">Silica</button>
                    <button class="layer-toggle active" id="Gold" onclick="toggleLayer('gold-layer')">Gold</button>
                    <button class="layer-toggle active" id="Platinum" onclick="toggleLayer('platinum-layer')">Platinum</button>
                    <button class="layer-toggle active" id="Aluminum" onclick="toggleLayer('aluminum-layer')">Aluminum</button>
                    <button class="layer-toggle active" id="Titanium" onclick="toggleLayer('titanium-layer')">Titanium</button>
                </div>
            </div>
        </div>
    </section>

    <script>
        let scale = 1;
        let panning = false;
        let pointX = 0;
        let pointY = 0;
        let start = { x: 0, y: 0 };

        const container = document.getElementById('mapContainer');
        const wrapper = document.getElementById('mapWrapper');

        // Layer visibility state
        const layerStates = {
        layer1: true,
        layer2: false,
        layer3: false
        };

        // Toggle layer visibility
        function toggleLayer(layerId) {
        const layer = document.getElementById(layerId);
        const button = event.target;
        
        layerStates[layerId] = !layerStates[layerId];
        
        if (layerStates[layerId]) {
            layer.style.display = 'block';
            button.classList.add('active');
        } else {
            layer.style.display = 'none';
            button.classList.remove('active');
        }
        }

        // Zoom functions
        function zoomIn() {
        scale *= 1.2;
        updateTransform();
        }

        function zoomOut() {
        scale /= 1.2;
        if (scale < 1) scale = 1;
        updateTransform();
        }

        function resetZoom() {
        scale = 1;
        pointX = 0;
        pointY = 0;
        updateTransform();
        }

        // Mouse wheel zoom
        container.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? 0.9 : 1.1;
        scale *= delta;
        if (scale < 1) scale = 1;
        updateTransform();
        });

        // Pan functionality
        container.addEventListener('mousedown', (e) => {
        e.preventDefault();
        start = { x: e.clientX - pointX, y: e.clientY - pointY };
        panning = true;
        });

        container.addEventListener('mousemove', (e) => {
        if (!panning) return;
        pointX = e.clientX - start.x;
        pointY = e.clientY - start.y;
        updateTransform();
        });

        container.addEventListener('mouseup', () => {
        panning = false;
        });

        container.addEventListener('mouseleave', () => {
        panning = false;
        });

        function updateTransform() {
        wrapper.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`;
        }
    </script>

    </body>
</html>